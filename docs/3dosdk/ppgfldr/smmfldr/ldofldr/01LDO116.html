<Title>LoadFileHere</Title>
<A NAME="XREF11782"><H1>LoadFileHere </A></H1>
 Loads a file into a pre-allocated buffer.<P>
<H3>Synopsis</H3>
<CODE>void * LoadFileHere (char *fname, int32 *pfsize, void *buffer, int32 bufsize)</CODE><P>
<H3>Description</H3>
Loads a file into a buffer you allocate. It is identical to <CODE>LoadFile()</CODE> except that it lets you allocate the buffer. If the bufsize parameter is non-zero, this function checks to ensure that the file will fit in the specified buffer. The actual size of the file, which may be smaller than the buffer, is stored at *pfsize. If an error occurs the word at *pfsize will contain a negative error code. <P>
When allocating a buffer, remember that the buffer has to be an integral multiple of the file device's blocksize.That is, loading a 700 byte file from a CD still requires a 2k buffer. A useful space-saving technique involves loading a small file into the inactive screen buffer in VRAM then copying it (or perhaps just a small portion of it that you need) to a right-sized buffer elsewhere in memory. <P>
<H3>Arguments</H3>
<DL>
<DT>fname
<DD>Name of the file to load. 
</DL>
<DL>
<DT>pfsize
<DD>Pointer to a word which, after the call, holds the actual size of the file. 
</DL>
<DL>
<DT>buffer
<DD>Pointer to a buffer large enough to hold the file. 
</DL>
<DL>
<DT>bufsize
<DD>Size of the buffer, or zero to disable overflow checking. 
</DL>
<H3>Return Value</H3>
Returns a pointer to the buffer, or NULL on error. <P>
<H3>Implementation</H3>
Library call implemented in lib3do.lib. <P>
<H3>Associated Files</H3>
lib3do.lib, blockfile.h<P>
<H3>See Also</H3>
<CODE><A HREF="./01LDO115.html#XREF27218"><CODE>LoadFile</A>, </CODE><A HREF="./01LDO002.html#XREF32442">AsyncLoadFile</A> </CODE><P>
