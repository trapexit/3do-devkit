<TITLE>Attaching Multiple Samples to an Instrument</TITLE>
<H1>Attaching Multiple Samples to an Instrument</H1><HR>
<B>Q:  </B> I tried attaching all the samples I load to one instrument (instead of allocating an instrument for each one), and then calling SetAudioItemInfo() with the AF_ATTF_NOAUTOSTART tag, and it fixed my problem. The only drawback is that now I cannot play multiple sound effects at the same time. There are a couple of places in the game where this happens.<P>
<B>A:</B> Consider a compromise between the previous and your current techniques. Allocate three or four instruments, keep track of which ones are in use at any given moment, and when you want to play a sound attach the sample to the instrument and mark that instrument as in use. When the sample is done (CUE_AT_END), detach the sample from the instrument and mark it as free.<P>
This sounds like a lot of work, but actually, it is all done for you. If you assign each sound effect as a MIDI note in a PIMap file (see <A HREF="./09mpg.html#XREF20742">Playing MIDI Scores</A>), you can create and delete these sounds very efficiently with <CODE>StartScoreNote()</CODE> and <CODE>StopScoreNote()</CODE>. A setting in the PIMap file allows you to control the maximum number of allocated sample players, and they are automatically reused when a sample stops playing. See the example file <I>tsc_soundfx.c</I>.<A NAME="XREF34048"></A><P>
